# JavaScript垃圾回收方法
JavaScript通过自动内存管理实现内存分配和闲置资源回收。
> 基本思路：确认哪个变量不会再使用，然后释放它占用的内存。
> 周期性：每个一段时间就会执行垃圾回收

**那么如何确定哪个变量不会再被使用呢？主要通过两种策略：**
- **标记清理**
- **引用计数**

## 标记清理（mark and sweep）
- JavaScript最常见的垃圾回收方式，当变量进入执行上下文，比如在函数中声明了一个变量，这个变量会被加上存在于这个执行上下文的标记，当变量**离开这个执行上下文（函数结束）**的时候就会被加上**离开的标记**。
- 垃圾回收执行的时候，会给内存中所存储的变量打上**标记**，然后在清除掉执行上下文中的变量以及变量被引用的变量的**标记**清除掉，在这个后面这些变量再次被打上标记就是待删除的了，因为执行上下文已经找不到这些变量了。随后垃圾回收程序做一次内存清理，销毁带标记的所有值并收回它们的内存。
  
**总结：先所有都加上标记，再把环境中引用到的变量去除标记，剩下有标记的就是要删除的**

## 引用计数（reference counting）
顾名思义就是对每个值记录被引用的次数，当声明变量并给它赋一个引用值时，这个值的引用数为 1。如果保存对该值引用的变量被其他值给覆盖了，那么引用数减 1。垃圾回收程序下次运行的时候就会释放引用数为 0 的值的内存


