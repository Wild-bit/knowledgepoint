# HTTP

## 简介

**HTTP**协议是**超文本传输协议(Hyper Text Transfer Protocol)** 的缩写，是从Web服务器传输超文本标记语言到本地浏览器传送协议，它是基于传输层协议TCP/IP通信协议来传送数据的。

## 特点

1. 无状态：也就是不保存**通信过程中的上下文信息**，每次HTTP请求都是独立、无关、默认不保留状态信息。
2. 灵活：允许传输文本、图片、视频等任意数据，传输的类型由Content-Type加以标记。
3. 简单快速：客户向服务器请求服务时，只需传送请求方法和路径。由于 HTTP 协议简单，使得 HTTP 服务器的程序规模小，因而通信速度很快。
4. 无连接：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。

## 缺点
1. 明文传输：通信使用明文（不加密），内容可能会被窃听
2. 不验证通信方身份，可能遭遇伪装
3. 无法证明报文的完整性，所以有可能被篡改
4. 无状态：对于需要长连接，需要保存大量的上下文信息，以免传输大量重复的信息，那么这时候无状态就是 http 的缺点了。如果应用仅仅只是为了获取一些数据，不需要保存连接上下文信息，无状态反而减少了网络开销，成为了 http 的优点。

## HTTP报文结构

> 用于HTTP协议交互的信息叫做HTTP报文

HTTP报文大致分为**报文头部**和**报文主体**两部分组成
 - 报文首部：服务端或客户端需处理的请求或响应的内容及属性
 - 报文主体：应被发送数据

具体而言：

```js
1. 起始行 + 头部 + 空行 + 实体
```
由于 http 请求报文和响应报文是有一定区别，因此我们分开介绍。

### 起始行

请求报文
> GET /home HTTP/1.1
> 方法 + 路径 + http版本

响应报文
> HTTP/1.1 200 OK
> http版本 + 状态码 + 原因

### 头部
请求报文
- 请求行（request line）
- 请求头部（header）
- 空行
- 请求数据
> GET /hello.txt HTTP/1.1  起始行
> User-Agent: curl/7.16.3 libcurl/7.16.3 OpenSSL/0.9.7l zlib/1.2.3
> Host: www.example.com
> Accept-Language: en, mi

头部以键值对的形式出现、字段名：值

响应报文
- 状态行
- 消息报文
- 空行
- 响应体
![响应报文](https://raw.githubusercontent.com/Wild-bit/myBlog/main/img/Bowser/HTTPReq.png)

### 空行
很重要，用来区分开头部和实体。

问: 如果说在头部中间故意加一个空行会怎么样？

那么空行后的内容全部被视为实体。

### 实体
就是具体的数据了，也就是body部分。请求报文对应请求体, 响应报文对应响应体。

## 版本更替

